<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="scripts.js">
    <title>Etch-a-Sketch</title>
</head>
<body>
    <header class="header">
        <div class="header-bar">
            <h3>
                Etch-a-Sketch
            </h3>
        </div>
    </header>
    <section class="main">
        <div class="button-bar" id="main-bar">
            <button class="btn" id="bigger">BIGGER</button>
            <button class="btn" id="smaller">SMALLER</button>
            <button class="btn" id="picker">COLOR PICKER</button>
            <button class="btn" id="clear">CLEAR</button>
        </div>
        <div class="button-bar disabled" id="color-bar">
            <button class="btn" id="grey-scale">GREY SCALE</button>
            <button class="btn" id="rainbow">RAINBOW</button>
            <button class="btn" id="color"><input type="color"></button>
            <button class="btn" id="exit">EXIT</button>
        </div>
        <div class="container" id="container">
           
        </div>
    </section>

    <script>
        const board = document.querySelector(".container");
        
        let min = 2;

        function toggleButtons(id) {
           
          const elem = document.querySelector(id);
          const check = elem.classList.contains("disabled");
            console.log(check);
          console.log(elem);
          if(check === true) {
              elem.style.display = "block";
          } else {
              elem.style.display = "none";
          }
            
        }

        function createBoard(num) {    

            //clear the game board
            board.innerHTML = "";
           
            //Sets the number of rows+columns
            board.style.gridTemplateColumns = "repeat(" + num + ", 1fr)";
       
            //Squares the number of rows+columns for total number of squares
            const numSq = num**2;

            //Loops through appending squares to container div
            for(let i=0; i<numSq; i++) {

                const newDiv = document.createElement('div');
                newDiv.id = 'sq'+i;
                newDiv.className = 'game-sq';
                board.appendChild(newDiv);
            }
            
        }
        createBoard(min);

        const bigger = document.querySelector("#bigger");
        const smaller = document.querySelector("#smaller");
        const picker = document.querySelector("#picker");
        const clear = document.querySelector("#clear");
        smaller.disabled = true;
        
        //Checks for the current board size and disables buttons if at min or max size
        function sizeCheck() {
            if(min < 4) {
            smaller.disabled = true;
            } else {
            smaller.disabled = false;
            }

            if(min > 62) {
                bigger.disabled = true;
            } else {
                bigger.disabled = false;
            }
        }

        //Bigger Button Function - increases board rows+columns by 2
        bigger.addEventListener('click', () => {
            min+=2;
            createBoard(min);
            sizeCheck();
            //greyScale();
            //raindbowColor();
            userColor();  
        });
        
        //Smaller Button Function - decreases board rows+columns by 2
        smaller.addEventListener('click', () => {
            min-=2;
            createBoard(min);
            sizeCheck();
            //greyScale();
            //raindbowColor();
            userColor();
        });
        

        picker.addEventListener('click', () => {
            toggleButtons("#color-bar");
            toggleButtons("#main-bar");
          
            //console.log(picker.id);
        });
        
        //Clear Button Function - Redraws board to clear it
        clear.addEventListener('click', () => {
            
            createBoard(min);
            //greyScale();
            //raindbowColor();
            userColor();
        });

        exit.addEventListener('click', () => {
            toggleButtons("#color-bar");
            toggleButtons("#main-bar");
          
            console.log(picker.id);
        });

        //Loops through squares, adding eventListeners, increases the alpha of the bg color on each successive mouseover
        function greyScale() {
            const squares = document.querySelectorAll(".game-sq");
                squares.forEach((div) => { 
                    let alpha = 0.1;
                        
                    div.addEventListener('mouseover', () => {
                
                        div.style.backgroundColor = 'rgba(0,0,0,'+alpha+')';
                        if(alpha < 0.8) {
                            alpha+=0.2;
                        } 
                });
            });
        }

        //Loops through squares, adding eventListeners, changes mouseover bg-color to user selected color
        function userColor() {
            const squares = document.querySelectorAll(".game-sq");
                squares.forEach((div) => { 
                    let alpha = 0.1;
                        
                    div.addEventListener('mouseover', () => {
                
                        div.style.backgroundColor = 'rgba(0,0,0,'+alpha+')';
                        if(alpha < 0.8) {
                            alpha+=0.2;
                        }
                });
            });
        }

        //Uses sine waves to create rainbow colors
        function raindbowColor() {
            
            //rounds the caluclated sine numbers and returns an rgb() code
            function RGB2Color(r,g,b) {
                return '(' + Math.round(r) + ',' + Math.round(g) + ',' + Math.round(b) + ')';
            }

            const squares = document.querySelectorAll(".game-sq");
            let i = 0;
            
            //Loops through each square, adds an eventListener, assigns RGB values with phased sine waves
            squares.forEach((div) => { 
                let alpha = 0.1;
                let freq = 0.5;
                //let freq = 2*Math.PI/12
                let i = 0;
                    
                div.addEventListener('mouseover', () => {
                    let red = Math.sin(freq*i + 0) * 127 + 128;
                    let green = Math.sin(freq*i + 2) * 127 + 128;
                    let blue = Math.sin(freq*i + 4) * 127 + 128;
                    let color = RGB2Color(red,blue,green);
                    div.style.backgroundColor = 'rgb' + color;
                    console.log(i);
                    i+=1;
                });
            });
        }   

        //Selects the proper color function based on user input 
        function selectColor() {

        }
        //greyScale();
        //raindbowColor();
        userColor();

    </script>
</body>
</html>